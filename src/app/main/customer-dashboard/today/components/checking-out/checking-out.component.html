<div class="today-tabs" [@fadeInAnimation]>
  <div class="today-tabs-today-tabs-wrapper">
    <div class="content">
      <div class="mat-elevation-z3">
        <div class="title">Check-out</div>
        <div class="search">
          <input
            matInput
            [(ngModel)]="searchKey"
            (input)="handleSearch($event)"
            placeholder="Search here.."
          />
          <mat-icon>search</mat-icon>
        </div>
        <div class="table-container">
          <table
            mat-table
            [dataSource]="dataSource"
            class="mat-table-responsive"
          >
            <ng-container matColumnDef="property">
              <th mat-header-cell *matHeaderCellDef style="width: 10rem">
                Property
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="custom-property">
                  <img
                    class="img"
                    src="{{ setSrc(element.bookTo?.cover) }}"
                    alt="property"
                  />
                  <div class="name">{{ element.bookTo?.name }}</div>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="guestnames">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Booked guest
              </th>
              <td mat-cell class="name" *matCellDef="let element">
                <div class="custom-guest">
                  <img
                    class="img"
                    src="{{ setSrc(element.initiatedBy?.img) }}"
                    alt="property"
                  />
                  <div class="name">{{ element.initiatedBy?.fullName }}</div>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="numofguest">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                No. of Guest
              </th>
              <td mat-cell *matCellDef="let element">
                {{ setTotalGuest(element.details) }}
              </td>
            </ng-container>

            <ng-container matColumnDef="bookingdate">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Date booked
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.createdAt | date : "shortDate" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="reservationdate">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Reservation Date
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="custom-checkinout">
                  <div>
                    {{ element.duration?.start | date : "shortDate" }}
                  </div>
                  <div>-</div>
                  <div>
                    {{ element.duration?.end | date : "shortDate" }}
                  </div>
                </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="interval">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Interval
              </th>
              <td mat-cell *matCellDef="let element" style="white-space: pre">
                {{ setInterval(element.duration) }}
              </td>
            </ng-container>

            <!-- <ng-container matColumnDef="checkintime">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Check-In time
              </th>
              <td mat-cell *matCellDef="let element">-</td>
            </ng-container>

            <ng-container matColumnDef="checkouttime">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Check-Out time
              </th>
              <td mat-cell *matCellDef="let element">-</td>
            </ng-container> -->

            <ng-container matColumnDef="paymenttype">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Payment type
              </th>
              <td
                mat-cell
                *matCellDef="let element"
                style="text-transform: capitalize"
              >
                {{ element.transaction?.paymentType }}
              </td>
            </ng-container>

            <ng-container matColumnDef="paidamount">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Total Payout
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.paidamount | currency : "PHP" : "symbol" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="balanceamount">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Balance
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.balanceamount | currency : "PHP" : "symbol" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="totalearnings">
              <th mat-header-cell *matHeaderCellDef style="white-space: pre">
                Earnings
              </th>
              <td mat-cell *matCellDef="let element">
                {{ element.totalearnings | currency : "PHP" : "symbol" }}
              </td>
            </ng-container>

            <ng-container matColumnDef="action">
              <th
                mat-header-cell
                *matHeaderCellDef
                style="white-space: pre; text-align: center"
              >
                Action
              </th>
              <td mat-cell *matCellDef="let element" style="width: fit-content">
                <div class="action_btn">
                  <button (click)="viewDetails(element)">
                    <mat-icon>remove_red_eye</mat-icon>
                  </button>
                  <button (click)="viewProfile(element.initiatedBy?._id)">
                    <mat-icon> person_pin</mat-icon>
                  </button>
                  <button (click)="messageGuest(element.initiatedBy)">
                    <mat-icon> message</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
          <mat-paginator
            [length]="total"
            (page)="handlePageChange($event)"
            [pageSizeOptions]="[5, 10, 25, 100]"
            showFirstLastButtons
          ></mat-paginator>
        </div>
      </div>
      <!-- <div class="no-checking">
                 <div>You donâ€™t have any upcoming.</div>
            </div> -->
    </div>
  </div>
</div>
